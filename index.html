<!DOCTYPE html>
<html >
<head>
    <meta charset="UTF-8">
    <title>BUY-IT-NOW</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.7/angular.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ngStorage/0.3.11/ngStorage.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/services.js"></script>
    <script src="js/directives.js"></script>
    <script src="js/index.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body ng-app='shoppingCart'>
    <!-- add products -->
    <div class="add-wrapper" ng-controller="addController as addCtrl">
        <h2>{{ addCtrl.title }}</h2>
        <form action="#" name="productAddForm" ng-submit="addCtrl.save($event)" novalidate>
            <fieldset>
                <label for="product">Select a Product:</label>
                <select ng-model="addCtrl.selected" ng-options="product.title for product in addCtrl.offeredProducts" required="">
                </select>
                <span>Price: {{ addCtrl.selected.price }}</span>
                <label for="quantity">Quantity:</label>
                <input type="number" name="quantity" id="quantity" min="1" ng-model="addCtrl.quantity" required="">
                <button type="submit" ng-disabled="productAddForm.$invalid">Add</button>
            </fieldset>
        </form>
    </div>
    <!-- your shopping cart list -->
    <div class="shopping-wrapper">
    <h2>Your Shopping Cart</h2>
    <div ng-controller='CartController as cartList' class='cart' ng-show="cartList.items.length">
        <!-- <div ng-repeat='item in cartList.items'>
            <span>{{item.title}}</span>
            <input ng-model='item.quantity'>
            <span>{{item.price | currency}}</span>
            <span>{{item.price * item.quantity | currency}}</span>
            <button ng-click="cartList.remove($index)">Remove</button>
        </div> -->
        <table>
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Total</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in cartList.items track by $index">
                    <td>{{ item.title }}</td>
                    <td>{{ item.quantity }}</td>
                    <td>{{ item.price }}</td>
                    <td>{{ item.price * item.quantity | currency }}</td>
                    <td><button ng-click="cartList.remove($index, item)">Remove</button></td>
                </tr>
            </tbody>
        </table>
        <div class="confirm"><button ng-click="cartList.confirmOrder($event, cartList.items)">Confirm</button></div>
    </div><!-- .cart -->
    <p ng-show="!cartList.items.length">There are no items in your shopping cart</p>
    </div><!-- .shopping-wrapper -->
    <div class="your-purchases">
        <your-purchases></your-purchases>
    </div>
</body>
</html>
